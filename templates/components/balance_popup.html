{% load static %}
{% block javascript_include %}
    <script src="{% static 'js/core/balance_checker.js' %}"></script>
{% endblock javascript_include %}
<!-- Coin Balance Change Notification -->
<div id="balance-notification"
     class="fixed top-3 right-3 p-2 text-xs rounded-lg text-white font-semibold bg-green-500/70 hidden z-100 shadow-[0_0_15px_rgba(34,197,94,0.8)]">
    +50 coins
</div>
<!-- Balance Popup Component -->
<div x-cloak
     x-data="balanceChecker('{{ TEMPLATE_BAlANCE_ENDPOINT }}', {{ TEMPLATE_IS_AUTHENTICATED }})"
     x-init="balancePolling()"
     class="relative z-100">
    <!-- Popup overlay -->
    <div x-show="open"
         x-transition.opacity
         class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm">
        <!-- Popup card -->
        <div x-transition.scale.origin.center
             class="relative w-full max-w-sm mx-5 rounded-2xl bg-gradient-to-br from-white to-gray-100 p-6 text-center shadow-2xl ring-1 ring-black/10">
            <!-- Balance -->
            <div class="flex flex-col items-center">
                <p class="text-gray-800">ðŸ’° Youâ€™re almost out of coins! Grab some more to keep going.</p>
                <p class="mt-1 text-4xl font-extrabold text-gray-900">
                    <span x-text="balance"></span> <span class="text-lg text-gray-500">coins</span>
                </p>
            </div>
            <!-- Buttons -->
            <div class="mt-6 flex justify-center gap-3">
                <a href="{% url 'payment.list_packages' %}"
                   class="rounded-xl bg-gradient-to-r from-amber-500 to-yellow-400 px-5 py-2.5 text-white font-semibold shadow-md hover:scale-105 transition-transform">
                    Buy coins
                </a>
                <button @click="closePopup()"
                        class="rounded-xl bg-gray-200 px-5 py-2.5 text-gray-700 font-semibold shadow-md hover:bg-gray-300 transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>
